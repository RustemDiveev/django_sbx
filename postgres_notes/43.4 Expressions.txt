Все использующиеся вражения обрабатывается через главный выполнятель SQL сервера. Напртмер, когда пишется следующее:

IF expression THEN ...

PL/pgSQL вычисляет выражение путем генерации запроса вида: 

SELECT expression 

и его отправки в главный SQL движок. При формировании команды SELECT любые включения имен переменных PL/pgSQL заменяются на параметры запросов. Это позволяет плану запроса для SELECT быть подготовленным только один раз, а затем быть переиспользованным для последующих вычислений с другими значениями переменных. В действительности, разбор, что происходит в первый раз, это команда PREPARE. Например, если мы объявили две целочисленных переменных и пишем: 

IF x < y THEN ... 

то во внутренностях происходит следующее: 

PREPARE statement_name(integer, integer) AS SELECT $1 < $2;

и потом данное подготовленное выражение EXECUTE выполняется для каждогно выполнения IF с текущими значениями переменных, заданных как значения параметров. Оычно такие детали не важны пользователю, но такое полезно знать при диагностике проблемы. 

Так как expression преобразуется в команду SELECT, может содержать те же конструкции, что и обычный SELECT, за исключением того, что не может включать в себя UNION, INTERSECT, EXCEPT. Например, можно проверить пустая ли таблица так:

IF count(*) > 0 FROM my_table THEN ...

так как expression между IF и THEN разбирается так: SELECT count(*) > 0 FROM my_table. SELECT должен генерировать одну колонку и не более чем одну строку, если строк нет, то результат NULL.
